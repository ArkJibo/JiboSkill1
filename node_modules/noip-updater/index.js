var request = require('request');


exports.updateNoIP = function(user, pass, domain, ip, useHTTPS, cb) {
	var url = 'http' + (useHTTPS ? 's' : '') + '://' + user + ':' + pass + '@dynupdate.no-ip.com/nic/update?hostname=' + domain + (ip ? '&myip=' + ip : '');
	// console.log('URL: ' + url)

	try {
		request.get(url, function(err, res, body) {
			if (cb) cb(body, res, err);
		});
	} catch(err) {
		if (cb) cb('', null, err);
		else throw err;
	}
}

exports.getPublicIP = function(cb) {
	request.get('http://icanhazip.com/', function(err, res, body) {
		cb(body);
	});
}